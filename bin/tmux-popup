#!/bin/bash

# Toggleable floating terminal for tmux
# Opens in current working directory and uses a session-specific persistent session

width=${1:-80%}
height=${2:-80%}

current_session=$(tmux display-message -p -F "#{session_name}")

if [ "$(tmux display-message -p -F "#{session_name}")" = "popup" ];then
    tmux detach-client
else
    tmux popup -E -w "$width" -h "$height" "tmux attach -t popup || tmux new -s popup; tmux kill-session -t popup"
fi
